@model IEnumerable<WebBanThucAnNhanh.Models.FastFood>
@{
    ViewData["Title"] = "Trang chủ - Cửa hàng thức ăn nhanh";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<section class="hero" id="home">
    <div class="container">
        <div class="hero-content">
            <h1>Thưởng thức món ngon <span class="highlight">Tuyệt hảo</span></h1>
            <p>Trải nghiệm những chiếc burger ngon nhất, xúc xích nóng hổi và gà rán giòn rụm. Giao hàng tận nơi chỉ
                trong vòng 30 phút.</p>
        </div>
    </div>
</section>

<section class="about" id="about">
    <div class="container">
        <div class="section-title text-center">
            <h2>Câu Chuyện Của Chúng Tôi</h2>
        </div>
        <div class="about-content">
            <div class="about-text">
                <h3>Phục vụ món ngon từ năm <span class="highlight">2010</span></h3>
                <p>
                    Được thành lập với niềm đam mê mang lại hương vị tuyệt vời và chất lượng,
                    chúng tôi đã phục vụ thức ăn nhanh cao cấp hơn một thập kỷ qua.
                </p>
                <p>
                    Điều làm chúng tôi khác biệt là cam kết về chất lượng và tốc độ.
                    Các đầu bếp chuẩn bị bữa ăn với sự tỉ mỉ, đảm bảo từng miếng ăn là một trải nghiệm thú vị.
                </p>
                <a href="#menu" class="btn">Xem Thực Đơn</a>
            </div>
            <div class="about-image">
                <img src="@Url.Content("~/images/burgers.jpg")" alt="Premium Burger" />
            </div>
        </div>
    </div>
</section>
<section class="menu" id="menu">
    <div class="container">
        <div class="section-title text-center">
            <h2>Thực Đơn <span class="highlight">Hấp Dẫn</span></h2>
        </div>

        @* Form Tìm kiếm (Chỉ giữ lại form đơn giản trỏ sang trang Search) *@
        <div class="advanced-search-container animate-on-scroll">
            <form method="get" action="@Url.Action("Search", "Home")" class="search-form">
                <div class="search-row">
                    <div class="search-group search-keyword">
                        <i class="fas fa-search"></i>
                        <input type="text" name="keyword" placeholder="Bạn muốn ăn gì hôm nay?..." />
                    </div>
                    <div class="search-group">
                        <select name="themeId">
                            <option value="">-- Tất cả chủ đề --</option>
                            @if (ViewBag.Themes != null)
                            {
                                foreach (var theme in ViewBag.Themes)
                                {
                                    <option value="@theme.IdTheme">@theme.NameTheme</option>
                                }
                            }
                        </select>
                    </div>
                    <div class="search-group search-btn-group">
                        <button type="submit" class="btn btn-search">
                            <i class="fas fa-filter"></i> Tìm Kiếm
                        </button>
                    </div>
                </div>
            </form>
        </div>

        

        @* Hàm hiển thị danh sách món (Helper local function để đỡ lặp code) *@
        @{
            // SỬA 1: Đổi void thành async Task
            async Task RenderProductList(IEnumerable<WebBanThucAnNhanh.Models.FastFood> products)
            {
                foreach (var item in products)
                {
                    <div class="menu-item animate-on-scroll">
                        <div class="menu-item-img">
                            <img src="~/images/@item.Image" alt="@item.NameFastFood" />
                        </div>
                        <div class="menu-item-content">
                            <div class="menu-item-title">
                                <h4>@item.NameFastFood</h4>
                                <div class="menu-item-price">@item.Price.ToString("#,##0") đ</div>
                            </div>
                            <p class="menu-item-text">@item.Description</p>
                            <div class="menu-item-order">
                                <div class="menu-item-rating">
                                    <i class="fas fa-star text-warning"></i><i class="fas fa-star text-warning"></i><i
                                        class="fas fa-star text-warning"></i><i class="fas fa-star text-warning"></i><i
                                        class="fas fa-star text-warning"></i>
                                </div>
                                <div class="action-group">
                                    @* NÚT THÊM VÀO GIỎ CHÍNH THỨC *@
                                    <a href="@Url.Action("AddToCart", "Cart", new { id = item.IdFastFood })" class="btn-sm-custom">
                                        <i class="fas fa-cart-plus"></i> Thêm
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            }
        }

        @* Chỉ hiển thị 2 loại món ăn theo đúng database *@
        <div id="product-container">
            @* KHỐI LOẠI 2: Mặc định hiển thị *@
            <div class="menu-content active-content" id="type-2" style="display: grid;">
                @{
                    await RenderProductList(Model.Where(x => x.IdTypeOfFastFood == 2));
                }
            </div>

            @* KHỐI LOẠI 3: Mặc định ẩn *@
            <div class="menu-content" id="type-3" style="display: none;">
                @{
                    await RenderProductList(Model.Where(x => x.IdTypeOfFastFood == 3));
                }
            </div>
        </div>

    </div>
</section>

<section class="testimonials" id="testimonials">
    <div class="container">
        <div class="section-title text-center">
            <h2>Những khách hàng thân thuộc của chúng tôi nói gì?</h2>
            <p>Khám phá lý do tại sao khách hàng của chúng tôi luôn quay lại mua hàng lần nữa.</p>
        </div>

        <div class="testimonials-grid">

            <div class="testimonial-card animate-on-scroll">
                <div class="card-header-review">
                    <div class="user-info">
                        <img src="~/images/hung.png" alt="Hung" />
                        <div>
                            <h4>Hưng</h4>
                            <span class="user-role">Người Ăn Nhiều</span>
                            <div class="stars">
                                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i
                                    class="fas fa-star"></i><i class="fas fa-star"></i>
                            </div>
                        </div>
                    </div>
                    <i class="fas fa-quote-right quote-icon"></i>
                </div>
                <div class="card-body-review">
                    <p>"Những chiếc burger ngon nhất trong thành phố!
                        Tôi luôn bị ấn tượng bởi chất lượng và hương vị. Giao hàng lúc nào cũng đúng giờ, đồ ăn đến nơi
                        vẫn nóng hổi và tươi ngon. Đây sẽ là món khoái khẩu của tôi. Tôi sẽ ăn burger để càng béo phì
                        đến cuối đời”</p>
                </div>
                <div class="card-footer-review">
                    February 15, 2025
                </div>
            </div>

            <div class="testimonial-card animate-on-scroll">
                <div class="card-header-review">
                    <div class="user-info">
                        <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Sarah Johnson" />
                        <div>
                            <h4>Sarah Johnson</h4>
                            <span class="user-role">Blogger Thức Ăn</span>
                            <div class="stars">
                                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i
                                    class="fas fa-star"></i><i class="fas fa-star-half-alt"></i>
                            </div>
                        </div>
                    </div>
                    <i class="fas fa-quote-right quote-icon"></i>
                </div>
                <div class="card-body-review">
                    <p>“Tôi đã thử rất nhiều quán đồ ăn nhanh, nhưng nơi này thực sự nổi bật!
                        Bánh mì gà của họ ngon đến mức khó cưỡng, và dịch vụ khách hàng thì cực kỳ tuyệt vời. Tôi khuyên
                        tất cả người theo dõi của mình nên thử!”</p>
                </div>
                <div class="card-footer-review">
                    January 28, 2025
                </div>
            </div>

            <div class="testimonial-card animate-on-scroll">
                <div class="card-header-review">
                    <div class="user-info">
                        <img src="https://randomuser.me/api/portraits/men/86.jpg" alt="Michael Brown" />
                        <div>
                            <h4>Michael Brown</h4>
                            <span class="user-role">Bếp Trưởng Điều Hành</span>
                            <div class="stars">
                                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i
                                    class="fas fa-star"></i><i class="fas fa-star"></i>
                            </div>
                        </div>
                    </div>
                    <i class="fas fa-quote-right quote-icon"></i>
                </div>
                <div class="card-body-review">
                    <p>“Với tư cách là một đầu bếp, tôi rất coi trọng chất lượng nguyên liệu.
                        Nơi này chỉ sử dụng những nguyên liệu tốt nhất và tươi nhất. Gia đình tôi rất thích các combo ưu
                        đãi cuối tuần. Chúng tôi đã đặt món ở đây hơn một năm và chất lượng chưa bao giờ làm chúng tôi
                        thất vọng!”</p>
                </div>
                <div class="card-footer-review">
                    March 5, 2025
                </div>
            </div>

        </div>
    </div>
</section>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const tabs = document.querySelectorAll('.menu-tab');
        const contents = document.querySelectorAll('.menu-content');

        tabs.forEach(tab => {
            tab.addEventListener('click', function() {
                const target = this.getAttribute('data-target');

                // 1. Đổi màu nút được chọn
                tabs.forEach(t => t.classList.remove('active'));
                this.classList.add('active');

                // 2. Hiện danh sách món ăn tương ứng, ẩn danh sách còn lại
                contents.forEach(content => {
                    if (content.id === target) {
                        content.style.display = 'grid';
                    } else {
                        content.style.display = 'none';
                    }
                });
            });
        });
    });
</script>

